<%- include("../partials/header.ejs") %>

<h1>Pessoas</h1>
<p><a href="/pessoas/create">Nova pessoa</a></p>
<table class="table table-striped table-hover table-bordered">
  <tr>
    <th>Nome</th>
    <th>Ações</th>
  </tr>
  <% results.data.map( pessoa => { %>
  <tr>
    <td><%= pessoa.nome %></td>
    <td>
      <div class="btn-group" role="group" aria-label="...">
        <a type="button" class="btn btn-default" href="/pessoas/update/<%= pessoa.id %>">Editar</a>
        <a type="button" class="btn btn-default" href="/pessoas/delete/<%= pessoa.id %>" onclick="return confirm('deseja realmente exlcuir')">Excluir</a>
      </div>
    </td>
  </tr>
  <% }) %>
</table>
<nav aria-label="Page navigation example">
  <ul class="pagination">

    <% if(results.pagination.currentPage>0){ %>
    <li class="page-item"><a class="page-link" href="/pessoas?page=<%= (results.pagination.currentPage - 1) %> ">Anterior</a></li>
    <% } %>

    <% for(let i=0; i<results.pagination.pages; i++){%>
    <li class="page-item <%if(i==results.pagination.currentPage){%> active<% } %>"><a class="page-link" href="/pessoas?page=<%= i %>"> <%= (i + 1) %></a></li>
    <% } %>

    <% if(results.pagination.currentPage < results.pagination.pages -1){ %>
    <li class="page-item"><a class="page-link" href="/pessoas?page=<%= (results.pagination.currentPage + 1) %>">Proximo</a></li>
    <% } %>

  </ul>
</nav>
<%- include("../partials/footer.ejs") %>